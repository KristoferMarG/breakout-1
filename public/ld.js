(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var canvas = document.createElement("canvas");
var gl = canvas.getContext("webgl");
var vertexSrc = document.getElementById("vertex").text;
var fragSrc = document.getElementById("fragment").text;

var POINT_DIMENSION = 2;
var POINTS_PER_BOX = 6;
var BOX_LENGTH = POINT_DIMENSION * POINTS_PER_BOX;

var maxFromWidth = function (ratio, width) {
  return width / ratio;
};
var maxFromHeight = function (ratio, height) {
  return height * ratio;
};

//get the target dimensions
//fit largest possible box of world ratio into these dimensions
//resize canvas to these dimensions
//update viewport with canvas dimensions
//:: => GLContext -> DOMElement -> World
function resizeView(gl, target, world) {
  var _canvas = gl.canvas;
  var ratio = world.ratio;
  var maxWidth = target.innerWidth;
  var maxHeight = target.innerHeight;
  var targetRatio = maxWidth / maxHeight;
  var useWidth = ratio >= targetRatio;
  var w = useWidth ? maxWidth : maxFromHeight(ratio, maxHeight);
  var h = useWidth ? maxFromWidth(ratio, maxWidth) : maxHeight;

  _canvas.width = w * 0.9;
  _canvas.height = h * 0.9;
  gl.viewport(0, 0, _canvas.width, _canvas.height);
}

//:: => GLContext -> ENUM (VERTEX || FRAGMENT) -> String (Code)
function Shader(gl, type, src) {
  var shader = gl.createShader(type);
  var isValid = false;

  gl.shaderSource(shader, src);
  gl.compileShader(shader);

  isValid = gl.getShaderParameter(shader, gl.COMPILE_STATUS);

  if (!isValid) throw new Error("Not valid shader: \n" + src);
  return shader;
}

//:: => GLContext -> VertexShader -> FragmentShader
function Program(gl, vs, fs) {
  var _program = gl.createProgram(vs, fs);

  gl.attachShader(_program, vs);
  gl.attachShader(_program, fs);
  gl.linkProgram(_program);
  return _program;
}

//:: => GLContext -> Buffer
function Buffer(gl) {
  return gl.createBuffer();
}

//:: => Int -> Int
function World(width, height) {
  return {
    ratio: width / height,
    width: width,
    height: height
  };
}

//Coordinate system for webGL is clipspace which is -1 -> 1 on both x and y
//  Point(-1, -1), Point(1, -1), Point(-1, 1)
//express the data above on a single array
//  [-1.0, -1.0, 1.0, -1.0, -1.0, 1.0] -- standard JS Array  -- create with new Array(SIZE)
//express as Float32Array
//  new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0])

//:: => GLContext -> Buffer -> Int -> Int -> Float32Array
function updateBuffer(gl, buffer, loc, chunkSize, data) {
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.bufferData(gl.ARRAY_BUFFER, data, gl.DYNAMIC_DRAW);
  gl.enableVertexAttribArray(loc);
  gl.vertexAttribPointer(loc, chunkSize, gl.FLOAT, false, 0, 0);
}

function setBox(boxArray, index, x, y, w, h) {
  var i = BOX_LENGTH * index;
  var x1 = x;
  var y1 = y;
  var x2 = x + w;
  var y2 = y + h;

  boxArray[i] = x1;
  boxArray[i + 1] = y1;
  boxArray[i + 2] = x2;
  boxArray[i + 3] = y1;
  boxArray[i + 4] = x1;
  boxArray[i + 5] = y2;

  boxArray[i + 6] = x1;
  boxArray[i + 7] = y2;
  boxArray[i + 8] = x2;
  boxArray[i + 9] = y1;
  boxArray[i + 10] = x2;
  boxArray[i + 11] = y2;
}

var BOX_COUNT = 10;
var activeBoxes = 1;
var vs = Shader(gl, gl.VERTEX_SHADER, vertexSrc);
var fs = Shader(gl, gl.FRAGMENT_SHADER, fragSrc);
var program = Program(gl, vs, fs);
var buffer = Buffer(gl);
var boxes = new Float32Array(BOX_COUNT * BOX_LENGTH);
var posLocation = gl.getAttribLocation(program, "a_position");
var world = World(1920, 1080);

window.world = world;

setBox(boxes, 0, 0, 0, 1, 1);

function makeAnimate(stuff) {
  gl.useProgram(program);
  return function animate() {
    gl.clearColor(1, 1, 1, 1);
    gl.clear(gl.COLOR_BUFFER_BIT);
    updateBuffer(gl, buffer, posLocation, POINT_DIMENSION, boxes);
    gl.drawArrays(gl.TRIANGLES, 0, activeBoxes * POINTS_PER_BOX);
    requestAnimationFrame(animate);
  };
}

//DOM Callback stuff
document.addEventListener("DOMContentLoaded", function () {
  document.body.appendChild(canvas);
  resizeView(gl, window, world);
  requestAnimationFrame(makeAnimate());
});

window.addEventListener("resize", function (_ref) {
  var target = _ref.target;
  resizeView(gl, target, world);
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiQzovVXNlcnMva2FuZXNfMDAwL3Byb2plY3RzL2JyZWFrb3V0L3NyYy9sZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxNQUFNLEdBQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQTtBQUNoRCxJQUFJLEVBQUUsR0FBVSxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQzFDLElBQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFBO0FBQ3RELElBQUksT0FBTyxHQUFLLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFBOztBQUV4RCxJQUFNLGVBQWUsR0FBRyxDQUFDLENBQUE7QUFDekIsSUFBTSxjQUFjLEdBQUksQ0FBQyxDQUFBO0FBQ3pCLElBQU0sVUFBVSxHQUFRLGVBQWUsR0FBRyxjQUFjLENBQUE7O0FBRXhELElBQUksWUFBWSxHQUFJLFVBQUMsS0FBSyxFQUFFLEtBQUs7U0FBSyxLQUFLLEdBQUcsS0FBSztDQUFBLENBQUE7QUFDbkQsSUFBSSxhQUFhLEdBQUcsVUFBQyxLQUFLLEVBQUUsTUFBTTtTQUFLLE1BQU0sR0FBRyxLQUFLO0NBQUEsQ0FBQTs7Ozs7OztBQU9yRCxTQUFTLFVBQVUsQ0FBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtBQUN0QyxNQUFJLE9BQU0sR0FBUSxFQUFFLENBQUMsTUFBTSxDQUFBO0FBQzNCLE1BQUksS0FBSyxHQUFTLEtBQUssQ0FBQyxLQUFLLENBQUE7QUFDN0IsTUFBSSxRQUFRLEdBQU0sTUFBTSxDQUFDLFVBQVUsQ0FBQTtBQUNuQyxNQUFJLFNBQVMsR0FBSyxNQUFNLENBQUMsV0FBVyxDQUFBO0FBQ3BDLE1BQUksV0FBVyxH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S0FBSyxDQUFBO0FBQzNCLE1BQUksRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNWLE1BQUksRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNWLE1BQUksRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDZCxNQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBOztBQUVkLFVBQVEsQ0FBQyxDQUFDLENBQUMsR0FBTSxFQUFFLENBQUE7QUFDbkIsVUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBSSxFQUFFLENBQUE7QUFDbkIsVUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBSSxFQUFFLENBQUE7QUFDbkIsVUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBSSxFQUFFLENBQUE7QUFDbkIsVUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBSSxFQUFFLENBQUE7QUFDbkIsVUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBSSxFQUFFLENBQUE7O0FBRW5CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUksRUFBRSxDQUFBO0FBQ25CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUksRUFBRSxDQUFBO0FBQ25CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUksRUFBRSxDQUFBO0FBQ25CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUksRUFBRSxDQUFBO0FBQ25CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFBO0FBQ25CLFVBQVEsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFBO0NBQ3BCOztBQUVELElBQUksU0FBUyxHQUFLLEVBQUUsQ0FBQTtBQUNwQixJQUFJLFdBQVcsR0FBRyxDQUFDLENBQUE7QUFDbkIsSUFBSSxFQUFFLEdBQVksTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFBO0FBQ3pELElBQUksRUFBRSxHQUFZLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLGVBQWUsRUFBRSxPQUFPLENBQUMsQ0FBQTtBQUN6RCxJQUFJLE9BQU8sR0FBTyxPQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUNyQyxJQUFJLE1BQU0sR0FBUSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDNUIsSUFBSSxLQUFLLEdBQVMsSUFBSSxZQUFZLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFBO0FBQzFELElBQUksV0FBVyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUE7QUFDN0QsSUFBSSxLQUFLLEdBQVMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTs7QUFFbkMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7O0FBRXBCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBOztBQUU1QixTQUFTLFdBQVcsQ0FBRSxLQUFLLEVBQUU7QUFDM0IsSUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtBQUN0QixTQUFPLFNBQVMsT0FBTyxHQUFJO0FBQ3pCLE1BQUUsQ0FBQyxVQUFVLENBQUMsQ0FBRyxFQUFFLENBQUcsRUFBRSxDQUFHLEVBQUUsQ0FBRyxDQUFDLENBQUE7QUFDakMsTUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtBQUM3QixnQkFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxLQUFLLENBQUMsQ0FBQTtBQUM3RCxNQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLFdBQVcsR0FBRyxjQUFjLENBQUMsQ0FBQTtBQUM1RCx5QkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQTtHQUMvQixDQUFBO0NBQ0Y7OztBQUdELFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFZO0FBQ3hELFVBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQ2pDLFlBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFBO0FBQzdCLHVCQUFxQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUE7Q0FDckMsQ0FBQyxDQUFBOztBQUVGLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsZ0JBQW9CO01BQVQsTUFBTSxRQUFOLE1BQU07QUFDakQsWUFBVSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUE7Q0FDOUIsQ0FBQyxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImxldCBjYW52YXMgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXHJcbmxldCBnbCAgICAgICAgPSBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpXHJcbmxldCB2ZXJ0ZXhTcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZlcnRleFwiKS50ZXh0XHJcbmxldCBmcmFnU3JjICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYWdtZW50XCIpLnRleHRcclxuXHJcbmNvbnN0IFBPSU5UX0RJTUVOU0lPTiA9IDJcclxuY29uc3QgUE9JTlRTX1BFUl9CT1ggID0gNlxyXG5jb25zdCBCT1hfTEVOR1RIICAgICAgPSBQT0lOVF9ESU1FTlNJT04gKiBQT0lOVFNfUEVSX0JPWFxyXG5cclxubGV0IG1heEZyb21XaWR0aCAgPSAocmF0aW8sIHdpZHRoKSA9PiB3aWR0aCAvIHJhdGlvXHJcbmxldCBtYXhGcm9tSGVpZ2h0ID0gKHJhdGlvLCBoZWlnaHQpID0+IGhlaWdodCAqIHJhdGlvXHJcblxyXG4vL2dldCB0aGUgdGFyZ2V0IGRpbWVuc2lvbnNcclxuLy9maXQgbGFyZ2VzdCBwb3NzaWJsZSBib3ggb2Ygd29ybGQgcmF0aW8gaW50byB0aGVzZSBkaW1lbnNpb25zXHJcbi8vcmVzaXplIGNhbnZhcyB0byB0aGVzZSBkaW1lbnNpb25zXHJcbi8vdXBkYXRlIHZpZXdwb3J0IHdpdGggY2FudmFzIGRpbWVuc2lvbnNcclxuLy86OiA9PiBHTENvbnRleHQgLT4gRE9NRWxlbWVudCAtPiBXb3JsZFxyXG5mdW5jdGlvbiByZXNpemVWaWV3IChnbCwgdGFyZ2V0LCB3b3JsZCkge1xyXG4gIGxldCBjYW52YXMgICAgICA9IGdsLmNhbnZhc1xyXG4gIGxldCByYXRpbyAgICAgICA9IHdvcmxkLnJhdGlvXHJcbiAgbGV0IG1heFdpZHRoICAgID0gdGFyZ2V0LmlubmVyV2lkdGhcclxuICBsZXQgbWF4SGVpZ2h0ICAgPSB0YXJnZXQuaW5uZXJIZWlnaHRcclxuICBsZXQgdGFyZ2V0UmF0aW8gPSBtYXhXaWR0aCAvIG1heEhlaWdodFxyXG4gIGxldCB1c2VXaWR0aCAgICA9IHJhdGlvID49IHRhcmdldFJhdGlvXHJcbiAgbGV0IHcgICAgICAgICAgID0gdXNlV2lkdGggPyBtYXhXaWR0aCA6IG1heEZyb21IZWlnaHQocmF0aW8sIG1heEhlaWdodClcclxuICBsZXQgaCAgICAgICAgICAgPSB1c2VXaWR0aCA/IG1heEZyb21XaWR0aChyYXRpbywgbWF4V2lkdGgpIDogbWF4SGVpZ2h0XHJcblxyXG4gIGNhbnZhcy53aWR0aCAgPSB3ICogLjlcclxuICBjYW52YXMuaGVpZ2h0ID0gaCAqIC45XHJcbiAgZ2wudmlld3BvcnQoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG59XHJcblxyXG4vLzo6ID0+IEdMQ29udGV4dCAtPiBFTlVNIChWRVJURVggfHwgRlJBR01FTlQpIC0+IFN0cmluZyAoQ29kZSlcclxuZnVuY3Rpb24gU2hhZGVyIChnbCwgdHlwZSwgc3JjKSB7XHJcbiAgbGV0IHNoYWRlciAgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSlcclxuICBsZXQgaXNWYWxpZCA9IGZhbHNlXHJcbiAgXHJcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKVxyXG4gIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKVxyXG5cclxuICBpc1ZhbGlkID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpXHJcblxyXG4gIGlmICghaXNWYWxpZCkgdGhyb3cgbmV3IEVycm9yKFwiTm90IHZhbGlkIHNoYWRlcjogXFxuXCIgKyBzcmMpXHJcbiAgcmV0dXJuICAgICAgICBzaGFkZXJcclxufVxyXG5cclxuLy86OiA9PiBHTENvbnRleHQgLT4gVmVydGV4U2hhZGVyIC0+IEZyYWdtZW50U2hhZGVyXHJcbmZ1bmN0aW9uIFByb2dyYW0gKGdsLCB2cywgZnMpIHtcclxuICBsZXQgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0odnMsIGZzKVxyXG5cclxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdnMpXHJcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzKVxyXG4gIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pXHJcbiAgcmV0dXJuIHByb2dyYW1cclxufVxyXG5cclxuLy86OiA9PiBHTENvbnRleHQgLT4gQnVmZmVyXHJcbmZ1bmN0aW9uIEJ1ZmZlciAoZ2wpIHtcclxuICByZXR1cm4gZ2wuY3JlYXRlQnVmZmVyKClcclxufVxyXG5cclxuLy86OiA9PiBJbnQgLT4gSW50XHJcbmZ1bmN0aW9uIFdvcmxkICh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJhdGlvOiB3aWR0aCAvIGhlaWdodCxcclxuICAgIHdpZHRoLCBcclxuICAgIGhlaWdodFxyXG4gIH1cclxufVxyXG5cclxuLy9Db29yZGluYXRlIHN5c3RlbSBmb3Igd2ViR0wgaXMgY2xpcHNwYWNlIHdoaWNoIGlzIC0xIC0+IDEgb24gYm90aCB4IGFuZCB5XHJcbi8vICBQb2ludCgtMSwgLTEpLCBQb2ludCgxLCAtMSksIFBvaW50KC0xLCAxKVxyXG4vL2V4cHJlc3MgdGhlIGRhdGEgYWJvdmUgb24gYSBzaW5nbGUgYXJyYXlcclxuLy8gIFstMS4wLCAtMS4wLCAxLjAsIC0xLjAsIC0xLjAsIDEuMF0gLS0gc3RhbmRhcmQgSlMgQXJyYXkgIC0tIGNyZWF0ZSB3aXRoIG5ldyBBcnJheShTSVpFKVxyXG4vL2V4cHJlc3MgYXMgRmxvYXQzMkFycmF5XHJcbi8vICBuZXcgRmxvYXQzMkFycmF5KFstMS4wLCAtMS4wLCAxLjAsIC0xLjAsIC0xLjAsIDEuMF0pXHJcblxyXG4vLzo6ID0+IEdMQ29udGV4dCAtPiBCdWZmZXIgLT4gSW50IC0+IEludCAtPiBGbG9hdDMyQXJyYXlcclxuZnVuY3Rpb24gdXBkYXRlQnVmZmVyIChnbCwgYnVmZmVyLCBsb2MsIGNodW5rU2l6ZSwgZGF0YSkge1xyXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpXHJcbiAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGRhdGEsIGdsLkRZTkFNSUNfRFJBVylcclxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShsb2MpXHJcbiAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihsb2MsIGNodW5rU2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRCb3ggKGJveEFycmF5LCBpbmRleCwgeCwgeSwgdywgaCkge1xyXG4gIGxldCBpICA9IEJPWF9MRU5HVEggKiBpbmRleFxyXG4gIGxldCB4MSA9IHhcclxuICBsZXQgeTEgPSB5IFxyXG4gIGxldCB4MiA9IHggKyB3XHJcbiAgbGV0IHkyID0geSArIGhcclxuXHJcbiAgYm94QXJyYXlbaV0gICAgPSB4MVxyXG4gIGJveEFycmF5W2krMV0gID0geTFcclxuICBib3hBcnJheVtpKzJdICA9IHgyXHJcbiAgYm94QXJyYXlbaSszXSAgPSB5MVxyXG4gIGJveEFycmF5W2krNF0gID0geDFcclxuICBib3hBcnJheVtpKzVdICA9IHkyXHJcblxyXG4gIGJveEFycmF5W2krNl0gID0geDFcclxuICBib3hBcnJheVtpKzddICA9IHkyXHJcbiAgYm94QXJyYXlbaSs4XSAgPSB4MlxyXG4gIGJveEFycmF5W2krOV0gID0geTFcclxuICBib3hBcnJheVtpKzEwXSA9IHgyXHJcbiAgYm94QXJyYXlbaSsxMV0gPSB5MlxyXG59XHJcblxyXG5sZXQgQk9YX0NPVU5UICAgPSAxMFxyXG5sZXQgYWN0aXZlQm94ZXMgPSAxXHJcbmxldCB2cyAgICAgICAgICA9IFNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdmVydGV4U3JjKVxyXG5sZXQgZnMgICAgICAgICAgPSBTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ1NyYylcclxubGV0IHByb2dyYW0gICAgID0gUHJvZ3JhbShnbCwgdnMsIGZzKVxyXG5sZXQgYnVmZmVyICAgICAgPSBCdWZmZXIoZ2wpXHJcbmxldCBib3hlcyAgICAgICA9IG5ldyBGbG9hdDMyQXJyYXkoQk9YX0NPVU5UICogQk9YX0xFTkdUSClcclxubGV0IHBvc0xvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpXHJcbmxldCB3b3JsZCAgICAgICA9IFdvcmxkKDE5MjAsIDEwODApXHJcblxyXG53aW5kb3cud29ybGQgPSB3b3JsZFxyXG5cclxuc2V0Qm94KGJveGVzLCAwLCAwLCAwLCAxLCAxKVxyXG5cclxuZnVuY3Rpb24gbWFrZUFuaW1hdGUgKHN0dWZmKSB7XHJcbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKVxyXG4gIHJldHVybiBmdW5jdGlvbiBhbmltYXRlICgpIHtcclxuICAgIGdsLmNsZWFyQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKVxyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVClcclxuICAgIHVwZGF0ZUJ1ZmZlcihnbCwgYnVmZmVyLCBwb3NMb2NhdGlvbiwgUE9JTlRfRElNRU5TSU9OLCBib3hlcylcclxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCBhY3RpdmVCb3hlcyAqIFBPSU5UU19QRVJfQk9YKVxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpXHJcbiAgfVxyXG59XHJcblxyXG4vL0RPTSBDYWxsYmFjayBzdHVmZlxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpXHJcbiAgcmVzaXplVmlldyhnbCwgd2luZG93LCB3b3JsZClcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWFrZUFuaW1hdGUoKSlcclxufSlcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICh7dGFyZ2V0fSkge1xyXG4gIHJlc2l6ZVZpZXcoZ2wsIHRhcmdldCwgd29ybGQpXHJcbn0pXHJcbiJdfQ==
